# **Задание 3:**
## **Кодирование, Python и SQL оптимизация**
У вас есть данные о заказах пользователей. Напишите Python-скрипт, который читает данную таблицу (файл) с данными о заказах. Ваша задача — загрузить их в БД, провести оптимизированную обработку и написать SQL-запросы. Формат: [!Тестовая таблица](https://docs.google.com/spreadsheets/d/1Hh9wPMVThGmXrctBrG15eOux8l5I9m5T1vaRisHqpF4/edit?gid=431063534#gid=431063534)
### **Часть 1: Оптимизированная загрузка в БД**
#### **1. Напишите ETL-скрипт, который:**
- Читает CSV-файл с заказами (1 млн строк).
- Выполняет нормализацию данных (выносит курсы и предметы в справочные таблицы).
- Использует batch-загрузку (COPY вместо INSERT).
- Работает асинхронно (например, asyncpg для PostgreSQL).
#### **2. Как ускорить загрузку данных?**
- Какие параметры БД (work_mem, shared_buffers) можно настроить?
- Как избежать блокировок таблиц при массовой вставке?
### **Часть 2: Оптимизация SQL-запросов**
1. Напишите SQL-запрос, который возвращает ТОП-5 самых продаваемых курсов по месяцам.
2. Напишите SQL-запрос, который возвращает ТОП-3 самых популярных пакетов по предметам.
3. Оптимизируйте запросы:
- Какие индексы добавить?
- Какую стратегию партиционирования выбрать (range, hash)?
- Как минимизировать full table scan?


[ОТВЕТ](./task3/README.md)